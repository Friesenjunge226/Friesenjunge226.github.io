<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>iFixit Daten</title>
  <style>
    :root {
      --header-gradient: linear-gradient(270deg, #ff00cc, #3333ff, #00ffcc, #ffcc00, #ff00cc);
    }
    html{
      font-size: 16px;
    }
    body {
      background-color: #000;
      color: #fff;
      padding: 20px 100px;
      font-family: sans-serif;
      font-size: 1.1rem;
    }
    div{
      align: right;
    }
    h1 {
      background: var(--header-gradient);
      background-size: 1000% 1000%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shine 300s ease-in-out infinite;
    }

    @keyframes shine {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    input[type="text"] {
      padding: 0.5em;
      font-size: 1em;
      border: 2px solid gray;
      background-color: #111;
      color: white;
      border-radius: 5px;
      margin-bottom: 1em;
      width: 300px;
    }

    button {
      margin-left: 10px;
      padding: 0.5em 1em;
      background-color: #000010;
      color: white;
      border: 2px solid gray;
      border-radius: 5px;
      cursor: pointer;
    }

    #usrdata {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1 id="header">Lade...</h1>
  <div id="skin-container" style="margin-top: 2rem;">
  <h2>Minecraft Skin</h2>
  <label for="mc-username-input">Minecraft-Name:</label>
  <input id="mc-username-input" type="text" placeholder="z.â€¯B. Friesenjunge226" />
  <button onclick="loadMinecraftSkin()">Skin laden</button>
  <div id="skin-output" style="margin-top: 1rem;"></div>
  </div>
  <input id="userid-input" type="text" placeholder="iFixit User-ID eingeben..." />
  <button onclick="loadUser()">Laden</button>

  <p id="usrdata">Lade Daten...</p>

  <script>
    const proxy = "https://corsproxy.io/?";
    const knownTeams = {
      46701: "German Translators",
      1: "iFixit",
      4580917: "Made in Germany"
    };

    
    const input = document.getElementById("userid-input");

    // === Gradient laden ===
    const savedGradient = localStorage.getItem("ifixitGradient");
    if (savedGradient) {
      document.documentElement.style.setProperty('--header-gradient', savedGradient);
    }

    // === User-ID laden ===
    const savedID = localStorage.getItem("ifixitUserID");
    if (savedID) {
      input.value = savedID;
      fetchUserData(savedID);
    } else {
      fetchUserData("4502323"); // Standard-User: Friesenjunge
    }

    function loadUser() {
      const userID = input.value.trim();
      if (userID === "") return;
      localStorage.setItem("ifixitUserID", userID);
      fetchUserData(userID);
    }

    function fetchUserData(userID) {
      document.getElementById("header").textContent = "Lade...";
      document.getElementById("usrdata").textContent = "Lade Daten...";

      const targetURL = `https://www.ifixit.com/api/2.0/users/${userID}`;
      fetch(proxy + encodeURIComponent(targetURL))
        .then(response => {
          if (!response.ok) throw new Error("Antwort war nicht OK.");
          return response.json();
        })
        .then(data => {
          const teamIDs = Array.isArray(data.teams) ? data.teams : [data.teams];
          const teamNames = teamIDs.map(id => knownTeams[id] || `Team-ID ${id}`).join(", ");
          const usrdata = `
            <p><strong>Benutzername:</strong> ${data.username}</p>
            <p><strong>Reputation:</strong> ${data.reputation}</p>
            <p><strong>Beigetreten am:</strong> ${new Date(data.join_date * 1000).toLocaleDateString("de-DE")}</p>
            <p><strong>Teams:</strong> ${teamNames}</p>
            <p><strong>Badges:</strong> ðŸ¥‰ ${data.badge_counts.bronze} | ðŸ¥ˆ ${data.badge_counts.silver} | ðŸ¥‡ ${data.badge_counts.gold}</p>
            <p><strong>Link zum Profil:</strong> <a href="https://www.ifixit.com/User/${data.userid}" target="_blank">Hier klicken</a></p>
          `;
          document.getElementById("header").textContent = `iFixit Stats von ${data.username}`;
          document.getElementById("usrdata").innerHTML = usrdata;
        })
        .catch(error => {
          document.getElementById("header").textContent = "Fehler!";
          document.getElementById("usrdata").textContent = "Fehler beim Laden von Daten: " + error.message;
          console.error(error);
        });
    }
    
    function loadMinecraftSkin() {
  const mcName = document.getElementById("mc-username-input").value.trim();
  if (!mcName) return;

     const MojangApiIp = "https://api.mojang.com/users/profiles/minecraft/${mcName}"
  fetch(proxy + MojangApiIp)
    .then(res => {
      if (!res.ok) throw new Error("Nicht gefunden");
      return res.json();
    })
    .then(data => {
      const uuid = data.id;
      const img = document.createElement("img");
      img.src = `https://crafatar.com/renders/body/${uuid}?scale=6`;
      img.alt = `${mcName}'s Minecraft Skin`;
      img.style.borderRadius = "10px";
      img.style.boxShadow = "0 0 20px rgba(0, 255, 255, 0.5)";
      img.style.transition = "transform 0.3s ease";
      img.style.maxHeight = "320px";

      img.onmouseenter = () => img.style.transform = "scale(1.05)";
      img.onmouseleave = () => img.style.transform = "scale(1)";

      const output = document.getElementById("skin-output");
      output.innerHTML = ""; // vorherigen Skin lÃ¶schen
      output.appendChild(img);
    })
    .catch(() => {
      const output = document.getElementById("skin-output");
      output.innerHTML = `<p style="color: red;">Skin konnte nicht geladen werden.</p>`;
    });
}

// iFixit-Username bei Erfolg direkt versuchen
function fetchUserData(userID) {
  // ... (dein bestehender Code bleibt)
  // Dann am Ende deines .then(data => { ... }):

  tryAutoLoadSkin(data.username);
}

function tryAutoLoadSkin(username) {
  document.getElementById("mc-username-input").value = username;
  loadMinecraftSkin();
}
  </script>

</body>
</html>
