<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Willkommen â€“ Onboarding</title>
<style>
  :root{
    --bg: #f6f8ff;
    --card:#ffffff;
    --ink:#101828;
    --muted:#667085;
    --brand:#4f46e5;
    --brand-weak:#e0e7ff;
    --border:#e5e7eb;
    --ok:#16a34a;
    --bad:#dc2626;
    --shadow:0 10px 30px rgba(2,8,23,.08);
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
    background: linear-gradient(135deg,var(--bg),#eef2ff 40%, #fdfcff);
    color:var(--ink);
  }
  .container{
    min-height:100dvh; display:grid; place-items:center; padding:24px;
    position:relative;
  }
  /* Logo + Close */
  .logo{position:fixed; left:20px; top:16px; font-weight:800; letter-spacing:.5px}
  .close{
    position:fixed; right:20px; top:16px; width:36px; height:36px; border-radius:12px;
    border:1px solid var(--border); background:#fff; display:grid; place-items:center;
    cursor:pointer; box-shadow:var(--shadow);
  }
  .wrap{width:min(920px,100%); display:grid; gap:18px; align-items:start}
  /* Steps */
  .steps{display:flex; gap:10px; justify-content:center; margin-top:28px}
  .step{width:28px; height:28px; border-radius:999px; border:2px solid var(--brand);
        display:grid; place-items:center; font-size:14px; color:var(--brand)}
  .step.active{background:var(--brand); color:#fff}
  .step.done{background:var(--brand-weak)}
  /* Grid: card + ad */
  .grid{
    display:grid; gap:18px;
    grid-template-columns: 1fr minmax(220px, 320px);
  }
  @media (max-width: 860px){ .grid{ grid-template-columns: 1fr; } }
  /* Card */
  .card{
    background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:22px;
  }
  .card h1{margin:0 0 8px 0; font-size:28px}
  .muted{color:var(--muted); font-size:14px}
  .field{display:grid; gap:8px; margin:14px 0}
  label{font-size:14px}
  input[type="email"]{
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--border);
    font-size:16px; outline:0;
  }
  input[type="email"]:focus{border-color:var(--brand); box-shadow:0 0 0 3px var(--brand-weak)}
  .row{display:flex; gap:12px; align-items:center}
  .row.wrap{flex-wrap:wrap}
  .btn{
    appearance:none; border:1px solid var(--border); background:#fff; padding:10px 14px;
    border-radius:12px; cursor:pointer; font-weight:600;
  }
  .btn.primary{background:var(--brand); color:#fff; border-color:var(--brand)}
  .btn[disabled]{opacity:.5; cursor:not-allowed}
  .ad{
    background:#fff; border:1px dashed var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:18px; text-align:center; min-height:92px;
  }
  /* Cookie bar */
  .cookie{
    position:fixed; left:16px; bottom:16px; background:#fff; border:1px solid var(--border);
    border-radius:999px; display:flex; gap:10px; align-items:center; padding:8px 10px;
    box-shadow:var(--shadow);
  }
  .pill{border-radius:999px}
  .btn.good{border-color:transparent; background:var(--ok); color:#fff}
  .btn.bad{border-color:transparent; background:var(--bad); color:#fff}
  /* Help FAB + Modal */
  .fab{
    position:fixed; right:16px; bottom:16px; width:56px; height:56px; border-radius:50%;
    background:var(--brand); color:#fff; display:grid; place-items:center; border:none;
    box-shadow:var(--shadow); cursor:pointer; font-size:20px;
  }
  dialog{
    border:none; border-radius:16px; padding:0; width:min(560px, 92vw);
    box-shadow:var(--shadow);
  }
  .modal-head{padding:16px 20px; border-bottom:1px solid var(--border); font-weight:700}
  .modal-body{padding:18px 20px; color:var(--muted)}
  .modal-actions{display:flex; justify-content:flex-end; gap:10px; padding:14px 20px; border-top:1px solid var(--border)}
  .hidden{display:none !important}
  .notice{font-size:13px; color:var(--muted)}
</style>
</head>
<body>
  <div class="container">
    <div class="logo">LOGO</div>
    <button class="close" id="btnClose" aria-label="SchlieÃŸen">âœ•</button>

    <div class="wrap">
      <!-- Steps -->
      <div class="steps" id="steps"></div>

      <!-- Main grid -->
      <div class="grid">
        <!-- Card -->
        <section class="card" aria-labelledby="welcome-title">
          <h1 id="welcome-title">Willkommen</h1>
          <p class="muted">Registriere dich in wenigen Schritten.</p>

          <!-- STEP CONTENT -->
          <div id="stepContent"></div>

          <div class="row wrap" style="margin-top:16px">
            <button class="btn" id="btnBack">ZurÃ¼ck</button>
            <button class="btn primary" id="btnNext">Weiter â†’</button>
          </div>
          <p class="notice" id="msg" role="status" aria-live="polite"></p>
        </section>

        <!-- Werbung -->
        <aside class="ad" aria-label="Werbung">
          <strong>Werbung ðŸ™‚</strong>
          <p class="muted" style="margin:6px 0 0">Hier kÃ¶nnte dein Sponsoring stehen.</p>
        </aside>
      </div>
    </div>

    <!-- Cookie bar -->
    <div class="cookie" id="cookieBar" role="region" aria-label="Cookie-Hinweis">
      <span>Cookies?</span>
      <button class="btn good pill" id="cookieYes">Ja</button>
      <button class="btn bad pill" id="cookieNo">Nein</button>
    </div>

    <!-- Help -->
    <button class="fab" id="helpFab" aria-label="Hilfe Ã¶ffnen">?</button>
    <dialog id="helpDialog">
      <div class="modal-head">Hilfe</div>
      <div class="modal-body">
        <p>â€¢ Schritt 1: E-Mail eintragen und AGB akzeptieren.</p>
        <p>â€¢ Mit â€žWeiterâ€œ gehst du zum nÃ¤chsten Schritt. â€žZurÃ¼ckâ€œ fÃ¼hrt dich einen Schritt zurÃ¼ck.</p>
        <p>â€¢ Cookie-Einstellungen unten links; Hilfe jederzeit Ã¼ber das ? unten rechts.</p>
      </div>
      <div class="modal-actions">
        <button class="btn" id="helpClose">SchlieÃŸen</button>
      </div>
    </dialog>
  </div>

<script>
  // ----- State -----
  const totalSteps = 4;
  let step = 1;
  const state = {
    email: "",
    accepted: false,
    profileDone: false,
    finishNote: ""
  };

  // ----- Elements -----
  const stepsEl = document.getElementById("steps");
  const contentEl = document.getElementById("stepContent");
  const msgEl = document.getElementById("msg");
  const btnBack = document.getElementById("btnBack");
  const btnNext = document.getElementById("btnNext");
  const cookieBar = document.getElementById("cookieBar");

  // Render step bubbles
  function renderSteps(){
    stepsEl.innerHTML = "";
    for(let i=1;i<=totalSteps;i++){
      const b = document.createElement("div");
      b.className = "step" + (i===step ? " active" : (i<step ? " done" : ""));
      b.textContent = i;
      stepsEl.appendChild(b);
    }
  }

  // Step screens
  function viewStep1(){
    contentEl.innerHTML = `
      <div class="field">
        <label for="email">E-Mail</label>
        <input id="email" type="email" placeholder="name@example.com" value="${state.email}">
      </div>
      <div class="row">
        <input id="terms" type="checkbox" ${state.accepted ? "checked":""} />
        <label for="terms" class="muted">Ich akzeptiere die AGB & Datenschutzbestimmungen</label>
      </div>
    `;
    const email = contentEl.querySelector("#email");
    email.addEventListener("input", (e)=> state.email = e.target.value.trim());
    contentEl.querySelector("#terms").addEventListener("change", (e)=> state.accepted = e.target.checked);
  }

  function viewStep2(){
    contentEl.innerHTML = `
      <p>Cool, <strong>${state.email || "Gast"}</strong>! ErzÃ¤hl uns kurz von dir.</p>
      <div class="field">
        <label for="nick">Nickname</label>
        <input id="nick" placeholder="Friesenjunge226" />
      </div>
    `;
  }

  function viewStep3(){
    contentEl.innerHTML = `
      <p>Beinahe fertig â€“ prÃ¼fe deine Angaben:</p>
      <ul class="muted">
        <li>E-Mail: <strong>${state.email || "â€“"}</strong></li>
        <li>AGB akzeptiert: <strong>${state.accepted ? "ja" : "nein"}</strong></li>
      </ul>
      <p class="muted">Mit â€žWeiterâ€œ bestÃ¤tigst du.</p>
    `;
  }

  function viewStep4(){
    contentEl.innerHTML = `
      <p>ðŸŽ‰ Geschafft! Willkommen an Bord.</p>
      <p class="muted">Du kannst dieses Fenster schlieÃŸen oder zurÃ¼ckspringen, um etwas zu Ã¤ndern.</p>
    `;
  }

  function render(){
    renderSteps();
    btnBack.disabled = step===1;
    msgEl.textContent = "";
    if(step===1) viewStep1();
    if(step===2) viewStep2();
    if(step===3) viewStep3();
    if(step===4) viewStep4();
    btnNext.textContent = step===totalSteps ? "Fertig" : "Weiter â†’";
  }

  // Validation for step 1
  function canProceed(){
    if(step===1){
      const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(state.email);
      if(!emailOk){ msgEl.textContent = "Bitte gib eine gÃ¼ltige E-Mail ein."; return false; }
      if(!state.accepted){ msgEl.textContent = "Bitte akzeptiere die AGB."; return false; }
    }
    return true;
  }

  // Events
  btnBack.addEventListener("click", ()=>{ if(step>1){ step--; render(); }});
  btnNext.addEventListener("click", ()=>{
    if(step===totalSteps){ alert("Danke! Registrierung abgeschlossen."); return; }
    if(!canProceed()) return;
    step++; render();
  });

  // Help
  const helpDialog = document.getElementById("helpDialog");
  document.getElementById("helpFab").addEventListener("click", ()=> helpDialog.showModal());
  document.getElementById("helpClose").addEventListener("click", ()=> helpDialog.close());

  // Close
  document.getElementById("btnClose").addEventListener("click", ()=> {
    if(confirm("Seite schlieÃŸen? Nicht gespeicherte Daten gehen verloren.")) {
      // In echten Apps: window.close() nur wenn vom Script geÃ¶ffnet wurde.
      document.body.innerHTML = "<p style='padding:2rem;font-family:system-ui'>Fenster geschlossen.</p>";
    }
  });

  // Cookie bar
  const COOKIE_KEY = "demo_cookie_choice";
  function hideCookieBar(){ cookieBar.classList.add("hidden"); }
  const saved = localStorage.getItem(COOKIE_KEY);
  if(saved){ hideCookieBar(); }
  document.getElementById("cookieYes").addEventListener("click", ()=>{
    localStorage.setItem(COOKIE_KEY, "yes"); hideCookieBar();
  });
  document.getElementById("cookieNo").addEventListener("click", ()=>{
    localStorage.setItem(COOKIE_KEY, "no"); hideCookieBar();
  });

  // Init
  render();
</script>
</body>
</html>
